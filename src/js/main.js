document.addEventListener("DOMContentLoaded", () => {

	const stepsArray = {

		legendText: 'Шаг',

		lastLegendIcon: '<svg width="59" height="57" viewBox="0 0 59 57" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M29.1371 56.4155C45.2291 56.4155 58.2742 43.9139 58.2742 28.4924C58.2742 13.0709 45.2291 0.569336 29.1371 0.569336C13.0451 0.569336 0 13.0709 0 28.4924C0 43.9139 13.0451 56.4155 29.1371 56.4155Z" fill="#41B4B4"/><path d="M43.8459 15.9937L24.9761 34.0772L17.2062 26.631L13.3213 30.3541L24.9761 41.5233L47.7308 19.7167L43.8459 15.9937Z" fill="white"/></svg>',

		iconsPath: 'assets/images/',

		data: [
	 		{
	 			title: 'Оставьте контакты',
	 			text: 'Заполните заявку на сайте или позвоните нам.',
	 			icon: ''
	 		},
	 		{
	 			title: 'Ознакомьтесь с нашей программой',
	 			text: 'Наш сотрудник уточнит детали вашей работы, проведет демонстрацию программы и подберет подходящий тариф.',
	 			icon: '26318285.png'
	 		},
	 		{
	 			title: 'Оплатите счет удобным способом',
	 			text: 'Мы направим вам счет, договор и все необходимые документы на программу.',
	 			icon: 'image 241.png'
	 		},
	 		{
	 			title: 'Начните работу в программе',
	 			text: 'Мы установим программу и поможем с её настройкой и обучением ваших сотрудников.',
	 			icon: '26318284_30.png'
	 		}
		]
	}


	const steps = document.querySelector('.steps')
	const mainArrows = document.querySelector('.main__arrows')

	const topSvg = `<svg class="arrow arrow-top" width="91" height="11" viewBox="0 0 91 11" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M0.900391 4.55919C0.517248 4.55919 0.20665 4.86979 0.20665 5.25293C0.20665 5.63607 0.517248 5.94667 0.900391 5.94667L0.900391 4.55919ZM89.8524 5.74349C90.1233 5.47256 90.1233 5.03331 89.8524 4.76239L85.4374 0.347448C85.1665 0.0765254 84.7273 0.0765254 84.4564 0.347448C84.1854 0.618371 84.1854 1.05762 84.4564 1.32855L88.3807 5.25294L84.4564 9.17733C84.1854 9.44825 84.1854 9.8875 84.4564 10.1584C84.7273 10.4293 85.1665 10.4293 85.4374 10.1584L89.8524 5.74349ZM8.27218 5.94667C8.65532 5.94667 8.96592 5.63607 8.96592 5.25293C8.96592 4.86979 8.65532 4.55919 8.27218 4.55919L8.27218 5.94667ZM23.0158 4.55919C22.6326 4.55919 22.322 4.86979 22.322 5.25293C22.322 5.63607 22.6326 5.94667 23.0158 5.94667L23.0158 4.55919ZM37.7593 5.94667C38.1425 5.94667 38.4531 5.63608 38.4531 5.25293C38.4531 4.86979 38.1425 4.55919 37.7593 4.55919L37.7593 5.94667ZM52.5029 4.55919C52.1198 4.55919 51.8092 4.86979 51.8092 5.25293C51.8092 5.63608 52.1198 5.94668 52.5029 5.94668L52.5029 4.55919ZM67.2465 5.94668C67.6296 5.94668 67.9402 5.63608 67.9402 5.25294C67.9402 4.86979 67.6296 4.55919 67.2465 4.55919L67.2465 5.94668ZM81.9901 4.5592C81.6069 4.5592 81.2963 4.86979 81.2963 5.25294C81.2963 5.63608 81.6069 5.94668 81.9901 5.94668L81.9901 4.5592ZM0.900391 5.94667L8.27218 5.94667L8.27218 4.55919L0.900391 4.55919L0.900391 5.94667ZM23.0158 5.94667L37.7593 5.94667L37.7593 4.55919L23.0158 4.55919L23.0158 5.94667ZM52.5029 5.94668L67.2465 5.94668L67.2465 4.55919L52.5029 4.55919L52.5029 5.94668ZM81.9901 5.94668L89.3618 5.94668L89.3618 4.5592L81.9901 4.5592L81.9901 5.94668ZM0.900391 4.55919C0.517248 4.55919 0.20665 4.86979 0.20665 5.25293C0.20665 5.63607 0.517248 5.94667 0.900391 5.94667L0.900391 4.55919ZM89.8524 5.74349C90.1233 5.47256 90.1233 5.03331 89.8524 4.76239L85.4374 0.347448C85.1665 0.0765254 84.7273 0.0765254 84.4564 0.347448C84.1854 0.618371 84.1854 1.05762 84.4564 1.32855L88.3807 5.25294L84.4564 9.17733C84.1854 9.44825 84.1854 9.8875 84.4564 10.1584C84.7273 10.4293 85.1665 10.4293 85.4374 10.1584L89.8524 5.74349ZM8.27218 5.94667C8.65532 5.94667 8.96592 5.63607 8.96592 5.25293C8.96592 4.86979 8.65532 4.55919 8.27218 4.55919L8.27218 5.94667ZM23.0158 4.55919C22.6326 4.55919 22.322 4.86979 22.322 5.25293C22.322 5.63607 22.6326 5.94667 23.0158 5.94667L23.0158 4.55919ZM37.7593 5.94667C38.1425 5.94667 38.4531 5.63608 38.4531 5.25293C38.4531 4.86979 38.1425 4.55919 37.7593 4.55919L37.7593 5.94667ZM52.5029 4.55919C52.1198 4.55919 51.8092 4.86979 51.8092 5.25293C51.8092 5.63608 52.1198 5.94668 52.5029 5.94668L52.5029 4.55919ZM67.2465 5.94668C67.6296 5.94668 67.9402 5.63608 67.9402 5.25294C67.9402 4.86979 67.6296 4.55919 67.2465 4.55919L67.2465 5.94668ZM81.9901 4.5592C81.6069 4.5592 81.2963 4.86979 81.2963 5.25294C81.2963 5.63608 81.6069 5.94668 81.9901 5.94668L81.9901 4.5592ZM0.900391 5.94667L8.27218 5.94667L8.27218 4.55919L0.900391 4.55919L0.900391 5.94667ZM23.0158 5.94667L37.7593 5.94667L37.7593 4.55919L23.0158 4.55919L23.0158 5.94667ZM52.5029 5.94668L67.2465 5.94668L67.2465 4.55919L52.5029 4.55919L52.5029 5.94668ZM81.9901 5.94668L89.3618 5.94668L89.3618 4.5592L81.9901 4.5592L81.9901 5.94668Z" fill="#134C75"/> </svg> `
	const bottomSvgLeft = `<svg class="arrow arrow-left" width="11" height="38" viewBox="0 0 11 38" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M6.12343 1.1377C6.12343 0.754553 5.81283 0.443954 5.42969 0.443954C5.04654 0.443954 4.73595 0.754553 4.73595 1.1377L6.12343 1.1377ZM4.93914 37.1913C5.21006 37.4622 5.64932 37.4622 5.92024 37.1913L10.3352 32.7763C10.6061 32.5054 10.6061 32.0662 10.3352 31.7952C10.0643 31.5243 9.625 31.5243 9.35408 31.7952L5.42969 35.7196L1.5053 31.7952C1.23437 31.5243 0.795123 31.5243 0.5242 31.7952C0.253277 32.0662 0.253277 32.5054 0.5242 32.7763L4.93914 37.1913ZM4.73595 10.0285C4.73595 10.4116 5.04655 10.7222 5.42969 10.7222C5.81283 10.7222 6.12343 10.4116 6.12343 10.0285L4.73595 10.0285ZM6.12343 27.81C6.12343 27.4268 5.81283 27.1162 5.42969 27.1162C5.04655 27.1162 4.73595 27.4268 4.73595 27.81L6.12343 27.81ZM4.73595 1.1377L4.73595 10.0285L6.12343 10.0285L6.12343 1.1377L4.73595 1.1377ZM4.73595 27.81L4.73595 36.7007L6.12343 36.7007L6.12343 27.81L4.73595 27.81ZM6.12343 1.1377C6.12343 0.754553 5.81283 0.443954 5.42969 0.443954C5.04654 0.443954 4.73595 0.754553 4.73595 1.1377L6.12343 1.1377ZM4.93914 37.1913C5.21006 37.4622 5.64932 37.4622 5.92024 37.1913L10.3352 32.7763C10.6061 32.5054 10.6061 32.0662 10.3352 31.7952C10.0643 31.5243 9.625 31.5243 9.35408 31.7952L5.42969 35.7196L1.5053 31.7952C1.23437 31.5243 0.795123 31.5243 0.5242 31.7952C0.253277 32.0662 0.253277 32.5054 0.5242 32.7763L4.93914 37.1913ZM4.73595 10.0285C4.73595 10.4116 5.04655 10.7222 5.42969 10.7222C5.81283 10.7222 6.12343 10.4116 6.12343 10.0285L4.73595 10.0285ZM6.12343 27.81C6.12343 27.4268 5.81283 27.1162 5.42969 27.1162C5.04655 27.1162 4.73595 27.4268 4.73595 27.81L6.12343 27.81ZM4.73595 1.1377L4.73595 10.0285L6.12343 10.0285L6.12343 1.1377L4.73595 1.1377ZM4.73595 27.81L4.73595 36.7007L6.12343 36.7007L6.12343 27.81L4.73595 27.81Z" fill="#134C75"/>
		</svg>
		`
	const bottomSvgMiddle = `<svg class="arrow arrow-middle" width="513" height="4" viewBox="0 0 513 4" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path d="M1.51172 2.24028L511.119 2.24028" stroke="#134C75" stroke-width="2.77496" stroke-linecap="round" stroke-dasharray="12.49 12.49"/>
		</svg>
		`
	const bottomSvgRight = `<svg class="arrow arrow-right width="4" height="28" viewBox="0 0 4 28" fill="none" xmlns="http://www.w3.org/2000/svg">
<line x1="2.12033" y1="26.2404" x2="2.12033" y2="1.6184" stroke="#134C75" stroke-width="2.77496" stroke-linecap="round" stroke-dasharray="12.49 12.49"/>
</svg>
		`


	mainArrows.insertAdjacentHTML('beforeend', topSvg + bottomSvgLeft + bottomSvgMiddle + bottomSvgRight + bottomSvgRight)

	const { legendText, lastLegendIcon, iconsPath, data } = stepsArray

	if (data instanceof Array && data.length > 0) {
		data.map( (item, index, array) => {
			if (item instanceof Object && Object.keys(item) !== 0) {

				const { title, text, icon } = item
				let _iconPath = iconsPath + icon
				let legend = legendText + ` ${index + 1}`
				let resetLegendStyle = ''
				let _icon = `
					<img 
						src="${_iconPath}" 
						alt="${_iconPath}" 
						class="item__icon"
					/>
				`

				if (icon === '' || icon === undefined) {
					_icon = ''
				}

				if (index === array.length - 1) {
					legend = lastLegendIcon
					resetLegendStyle = 'reset'
				}

				const step = `
					<fieldset class="steps__item item">
						<legend class="item__legend ${resetLegendStyle}">${legend}</legend>
						<div class="item__col">
							<h2 class="item__title">${title}</h2>
							<p class="item__description">${text}</p>
						</div>
						${_icon}
					</fieldset>
				`

				if (steps) {
					steps.insertAdjacentHTML('beforeend', step)
				}

			} 
		})
	}

});